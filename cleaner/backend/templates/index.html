<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audio Separation</title>
</head>
<body>
<h1>Audio Separation API</h1>

<form id="audioForm">
    <input type="file" name="file" id="fileInput" accept="audio/*" required>
    <button type="submit">Upload & Separate</button>
</form>

<div id="results"></div>

<script>
const form = document.getElementById('audioForm');
const results = document.getElementById('results');

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    results.innerHTML = "Processing... üéµ";

    const file = document.getElementById('fileInput').files[0];
    const formData = new FormData();
    formData.append('file', file);

    try {
        const response = await fetch('/separate', { method: 'POST', body: formData });
        const data = await response.json();

        if (data.error) {
            results.innerHTML = `‚ùå ${data.error}`;
            return;
        }

        // Show audio players
        results.innerHTML = `
            <h2>Vocals</h2>
            <audio controls autoplay src="${data.vocals}"></audio>

            <h2>Accompaniment</h2>
            <audio controls autoplay src="${data.accompaniment}"></audio>

            <p>${data.message}</p>
        `;
    } catch (err) {
        console.error(err);
        results.innerHTML = "‚ùå Error processing audio";
    }
});
</script>
</body>
</html>
